<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Ogani Template">
    <meta name="keywords" content="Ogani, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>EasyGreens</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;900&display=swap" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="/userAssets/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/userAssets/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/userAssets/css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="/userAssets/css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="/userAssets/css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="/userAssets/css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="/userAssets/css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="/userAssets/css/style.css" type="text/css">

    
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <!-- Add Bootstrap JS (Check the version number) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        /* Style for the custom scrollbar */
        #couponModal .modal-body::-webkit-scrollbar {
          width: 10px;
          /* Set the width of the scrollbar */
        }
  
        #couponModal .modal-body::-webkit-scrollbar-thumb {
          background-color: rgb(219, 204, 143, 0.7);
          /* Set the color of the thumb */
          border-radius: 5px;
          /* Set the border radius of the thumb */
        }
  
        #couponModal .modal-body::-webkit-scrollbar-track {
          background-color: #f8f9fa;
          /* Set the background color of the track */
        }
      </style>
</head>

<body>
    <!-- Page Preloder -->
    <!-- <div id="preloder">
        <div class="loader"></div>
    </div> -->

    <!-- Humberger Begin -->
    <!-- <div class="humberger__menu__overlay"></div>
    <div class="humberger__menu__wrapper">
        <div class="humberger__menu__logo">
            <a href="#"><img src="img/logo.png" alt=""></a>
        </div>
        <div class="humberger__menu__cart">
            <ul>
                <li><a href="#"><i class="fa fa-heart"></i> <span>1</span></a></li>
                <li><a href="#"><i class="fa fa-shopping-bag"></i> <span>3</span></a></li>
            </ul>
            <div class="header__cart__price">item: <span>$150.00</span></div>
        </div>
        <div class="humberger__menu__widget">
            <div class="header__top__right__language">
                <img src="img/language.png" alt="">
                <div>English</div>
                <span class="arrow_carrot-down"></span>
                <ul>
                    <li><a href="#">Spanis</a></li>
                    <li><a href="#">English</a></li>
                </ul>
            </div>
            <div class="header__top__right__auth">
                <a href="#"><i class="fa fa-user"></i> Login</a>
            </div>
        </div>
        <nav class="humberger__menu__nav mobile-menu">
            <ul>
                <li class="active"><a href="./index.html">Home</a></li>
                <li><a href="./shop-grid.html">Shop</a></li>
                <li><a href="#">Pages</a>
                    <ul class="header__menu__dropdown">
                        <li><a href="./shop-details.html">Shop Details</a></li>
                        <li><a href="./shoping-cart.html">Shoping Cart</a></li>
                        <li><a href="./checkout.html">Check Out</a></li>
                        <li><a href="./blog-details.html">Blog Details</a></li>
                    </ul>
                </li>
                <li><a href="./blog.html">Blog</a></li>
                <li><a href="./contact.html">Contact</a></li>
            </ul>
        </nav>
        <div id="mobile-menu-wrap"></div>
        <div class="header__top__right__social">
            <a href="#"><i class="fa fa-facebook"></i></a>
            <a href="#"><i class="fa fa-twitter"></i></a>
            <a href="#"><i class="fa fa-linkedin"></i></a>
            <a href="#"><i class="fa fa-pinterest-p"></i></a>
        </div>
        <div class="humberger__menu__contact">
            <ul>
                <li><i class="fa fa-envelope"></i> hello@colorlib.com</li>
                <li>Free Shipping for all Order of $99</li>
            </ul>
        </div>
    </div> -->
    <!-- Humberger End -->
    <!-- Header Section Begin -->
    <header class="header">
        <div class="header__top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="header__top__left">
                            <ul>
                                <li><i class="fa fa-envelope"></i> easygreens@gmail.com</li>
                                <li>Free Shipping for all Order above â‚¹ 99</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="header__top__right">
                            <div class="header__top__right__social">
                                <a href="#"><i class="fa fa-facebook"></i></a>
                                <!-- <a href="#"><i class="fa fa-twitter"></i></a>
                                <a href="#"><i class="fa fa-linkedin"></i></a>
                                <a href="#"><i class="fa fa-pinterest-p"></i></a> -->
                            </div>
                            <div class="header__top__right__language">
                                <img src="/userAssets/img/language.png" alt="">
                                <div>English</div>
                                <span class="arrow_carrot-down"></span>
                                <ul>
                                    <li><a href="#">Spanish</a></li>
                                    <li><a href="#">English</a></li>
                                </ul>
                            </div>
                            <div class="header__top__right__auth">
                                <a href="/user-account"><i class="fa fa-user"></i> My Profile</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="header__logo">
                        <a href="./index.html"><img src="/userAssets/img/logo.png" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <nav class="header__menu">
                        <ul>
                            <li><a href="/home">Home</a></li>
                            <li class="active"><a href="./shop-grid.html">Shop</a></li>
                            <li><a href="#">Pages</a>
                                <ul class="header__menu__dropdown">
                                    <li><a href="/wishlist">Wishlist</a></li>
                                    <li><a href="/product-cart">Shoping Cart</a></li>
                                    <li><a href="/checkout">Check Out</a></li>
                                    
                                </ul>
                            </li>
                            <li><a href="./blog.html">Blog</a></li>
                            <li><a href="./contact.html">Contact</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-lg-3">
                    <div class="header__cart">
                        <ul>
                            <li><a href="/wishlist"><i class="fa fa-heart"></i> <span>1</span></a></li>
                            <li><a href="/product-cart"><i class="fa fa-shopping-bag"></i> <span>3</span></a></li>
                        </ul>
                        <!-- <div class="header__cart__price">item: <span>$150.00</span></div> -->
                    </div>
                </div>
            </div>
            <div class="humberger__open">
                <i class="fa fa-bars"></i>
            </div>
        </div>
    </header>
    <!-- Header Section End -->



    <!-- Breadcrumb Section Begin -->
    <!-- <section class="breadcrumb-section set-bg" data-setbg="/userAssets/img/breadcrumb.jpg">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="breadcrumb__text">
                        <h2>User Profile</h2>
                        <div class="breadcrumb__option">
                            <a href="/home">Home</a>
                            <span>Shop</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section> -->
    <!-- Breadcrumb Section End -->   


    <div class="container">
		<div class="main-body">
			<div class="row">
				<div class="col-lg-3">
					<div class="card">
						<div class="card-body">
							<div class="d-flex flex-column align-items-center text-center">
								<img src="/userAssets/img/profileDemo.png" alt="Admin" class="rounded-circle p-1 bg-primary" width="110">
								<div class="mt-3">
									<h4><%=user.firstName%></h4>
									<p class="text-secondary mb-1"><%=user.email%></p>
									<p class="text-muted font-size-sm"><%=user.mobile%></p>
									<!-- <button class="btn btn-primary">Follow</button>
									<button class="btn btn-outline-primary">Message</button> -->
								</div>
							</div>
							<hr class="my-4">
							<ul class="list-group list-group-flush">
								<li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <a href="/order" class="nav-item nav-link font-weight-bold pt-4"
                                    style="color: black;"><i class="fa fa-list"></i> My Orders</a>
								</li>
								<li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <a href="/product-cart" class="nav-item nav-link font-weight-bold pt-4"
                                    style="color: black;"><i class="fa fa-shopping-cart"></i> Cart</a>
								</li>
								<li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
									<a href="/forgot-password" class="nav-item nav-link font-weight-bold pt-4"
                                    style="color: black;"><i class="fa fa-sign-out"></i> Forgot Password?</a>   
								</li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <a href="/wallet" class="nav-item nav-link font-weight-bold pt-4"
                                    style="color: black;"><i class="fas fa-wallet"></i> My Wallet</a>  
								</li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
									<button class="btn btn-primary" style="width: fit-content; background-color: #7fad39; border-color: #7fad39;"  onclick="openModal()" type="button">
                                        <span class="button__text">Address</span>
                                        <span class="button__icon">
                                            <svg class="svg" fill="none" height="24" stroke="currentColor" stroke-linecap="round"
                                                stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <line x1="12" x2="12" y1="5" y2="19"></line>
                                                <line x1="5" x2="19" y1="12" y2="12"></line>
                                            </svg>
                                        </span>
                                    </button>
								</li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <button class="btn btn-primary"style="width: fit-content; background-color: #7fad39; border-color: #7fad39;" id="couponButton"
                                            onclick="openCouponModal()">Check Coupons</button>
								</li>
                                <!-- <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <button class="btn btn-primary" style="width: fit-content; background-color: #7fad39; border-color: #7fad39;"" id="refferalButton"
                                            onclick="openRefferalModal()">Reffer and Earn</button>
								</li> -->
								
                                
								

                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
									<a href="/logout" class="nav-item nav-link font-weight-bold pt-4"
                                    style="color: black;"><i class="fa fa-sign-out"></i> Logout</a>
								</li>
                                
							</ul>
                            
						</div>
					</div>
                    
				</div>
                <div class="col-lg-1"></div>
				<div class="col-lg-8">
					
                    <div class="card">
                        <div class="card-body">
                            <form>
                                <input type="hidden" name="user" value="<%=user%>" id="user">
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="firstName">First Name</label>
                                        <span style="background-color: #f3f2ee; display: block; padding: 8px;">
                                            <%=user.firstName%>
                                        </span>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="lastName">Last Name</label>
                                        <span style="background-color: #f3f2ee; display: block; padding: 8px;">
                                            <%=user.secondName%>
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <span style="background-color: #f3f2ee; display: block; padding: 8px;">
                                        <%=user.email%>
                                    </span>
                                </div>
                                <div class="form-group">
                                    <label for="mobile">Mobile</label>
                                    <span style="background-color: #f3f2ee; display: block; padding: 8px;">
                                        <%=user.mobile%>
                                    </span>
                                </div>
                                <input type="hidden" value="<%=Address%>">
                            </form>
                            <div>
                                <button onclick="editprofile()" class="btn btn-info">edit profile</button>
                                <button id="changePassword" class="btn btn-secondary">change password</button>
                            </div>
                        </div>
                    </div>
					<div class="row">
                        <div class="col-md-12 mt-12 ">
                            <div class="checkout__title mt-0" style="margin-left: 6px;">
                                <% if (Address) { %>
                                    <h5>Shipping Addresses</h5>
                                    <% } %>
            
                                        <% if (!Address) { %>
                                            <h6 class="text-danger">please add an shipping address</h6>
                                            <% } %>
                            </div>
                            <% if (Address) { %>
                                <% Address.forEach((userAddress, index)=> { %>
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <form>
                                                <div class="form-group">
                                                    <label for="streetAddress">Street Address</label>
                                                    <input type="text" class="form-control" id="streetAddress"
                                                        placeholder="Enter street address" style="background-color: #f3f2ee;"
                                                        readonly value="<%= userAddress.streetAddress %>">
                                                </div>
                                                <div class="form-group">
                                                    <label for="apartment">Apartment, suite, unit, etc. (optional)</label>
                                                    <input type="text" class="form-control" style="background-color: #f3f2ee;"
                                                        id="apartment" placeholder="Enter optional address information" readonly
                                                        value="<%= userAddress.houseName %>">
                                                </div>
                                                <div class="form-row">
                                                    <div class="form-group col-md-6">
                                                        <label for="city">City</label>
                                                        <input type="text" class="form-control" id="city"
                                                            style="background-color: #f3f2ee;" placeholder="Enter city" readonly
                                                            value="<%= userAddress.town %>">
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label for="state">State</label>
                                                        <input type="text" class="form-control" id="state"
                                                            style="background-color: #f3f2ee;" placeholder="Enter state" readonly
                                                            value="<%= userAddress.state %>">
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="form-group col-md-6">
                                                        <label for="zip">Zip Code</label>
                                                        <input type="number" minlength="1" maxlength="6" class="form-control"
                                                            style="background-color: #f3f2ee;" id="zip" placeholder="Enter zip code"
                                                            readonly value="<%= userAddress.zipcode %>">
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label for="country">Country</label>
                                                        <input type="text" class="form-control" id="country"
                                                            style="background-color: #f3f2ee;" placeholder="Enter country" readonly
                                                            value="<%= userAddress.country %>">
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <% }); %>
                        </div>
                        <% } %>
						<div class="col-sm-12">
							<!-- <div class="card">
								<div class="card-body">
									<h5 class="d-flex align-items-center mb-3">Project Status</h5>
									<p>Web Design</p>
									<div class="progress mb-3" style="height: 5px">
										<div class="progress-bar bg-primary" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
									<p>Website Markup</p>
									<div class="progress mb-3" style="height: 5px">
										<div class="progress-bar bg-danger" role="progressbar" style="width: 72%" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
									<p>One Page</p>
									<div class="progress mb-3" style="height: 5px">
										<div class="progress-bar bg-success" role="progressbar" style="width: 89%" aria-valuenow="89" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
									<p>Mobile Template</p>
									<div class="progress mb-3" style="height: 5px">
										<div class="progress-bar bg-warning" role="progressbar" style="width: 55%" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
									<p>Backend API</p>
									<div class="progress" style="height: 5px">
										<div class="progress-bar bg-info" role="progressbar" style="width: 66%" aria-valuenow="66" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
								</div>
							</div> -->
                            
                        </div>
					</div>
					
				</div>
			</div>
		</div>
	</div>







<!-- Modal 
<div class="modal fade" id="refferalModal" tabindex="-1" role="dialog" aria-labelledby="refferalModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="refferalModalLabel">Referral Program</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Refer a friend and earn rewards!</p>
                Add your referral program details here
                <div class="relative sm:ml-64 md:px-4 px-4 flex justify-center items-center mt-4">
                    <div class="h-1/3 w-full">
                        <h4 class="text-3xl text-center font-semibold"><%=refer.description%></h4>
                        <div class="flex flex-col justify-center items-center p-10 mt-10 gap-4">
                            <a id="myLink" style="text-decoration: underline;" ></a>
                            </a>
                             <button
                                id="copy-button"
                                type="button"
                                class="inline-block rounded bg-black px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]">
                                Copy
                            </button> 
                        </div>
                    </div>
                </div>
            </div> 
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Share Referral Link</button>
            </div>
        </div>
    </div>
</div>-->

















 


    <!-- Modal to display coupon details -->
    <div class="modal fade" id="couponModal" tabindex="-1" role="dialog" aria-labelledby="couponModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="couponModalLabel">Available Coupons</h5>
          <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="height: 360px; overflow-y: scroll; overflow-x: hidden;">
          <% if(coupons.length> 0) { %>
            <% coupons.forEach(coupon=> { %>
              <div class="card mb-3 d-flex flex-column align-items-center">
                <div class="card-body" style="background-color: rgb(246, 246, 246); width: 468px;">
                  <h5 class="card-title text-center" id="couponCode">
                    <%= coupon.couponCode %>
                  </h5>
                  <p class="card-text text-center" id="couponDescription" style="font-size: smaller;">
                   Maximum discountAmount is <%= coupon.discountAmount %>
                  </p>
                  <div class="row">
                   
                    <div class="col-md-4">
                      <!-- Center the image using Bootstrap utility classes -->
                      <!-- <img src="/assets/images/pngwing1.webp" alt="" width="60px" class="mx-auto d-block"> -->
                    </div>
                    
                  </div>
                </div>
              </div>
              <% }) %>

                <% } else { %>
                  <div class="card mb-3" style="background-color: rgb(215, 215, 215);">
                    <div class="card-body">
                      <h6 class="card-title text-center" id="couponCode">No coupons found</h6>
                    </div>
                  </div>
                  <% } %>
        </div>
      </div>
    </div>
  </div>





    <!-- Footer Section Begin -->
    <footer class="footer spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer__about">
                        <div class="footer__about__logo">
                            <a href="./index.html"><img src="img/logo.png" alt=""></a>
                        </div>
                        <ul>
                            <li>Address: 60-49 Road 11378 New York</li>
                            <li>Phone: +65 11.188.888</li>
                            <li>Email: hello@colorlib.com</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 offset-lg-1">
                    <div class="footer__widget">
                        <h6>Useful Links</h6>
                        <ul>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">About Our Shop</a></li>
                            <li><a href="#">Secure Shopping</a></li>
                            <li><a href="#">Delivery infomation</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Our Sitemap</a></li>
                        </ul>
                        <ul>
                            <li><a href="#">Who We Are</a></li>
                            <li><a href="#">Our Services</a></li>
                            <li><a href="#">Projects</a></li>
                            <li><a href="#">Contact</a></li>
                            <li><a href="#">Innovation</a></li>
                            <li><a href="#">Testimonials</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-12">
                    <div class="footer__widget">
                        <h6>Join Our Newsletter Now</h6>
                        <p>Get E-mail updates about our latest shop and special offers.</p>
                        <form action="#">
                            <input type="text" placeholder="Enter your mail">
                            <button type="submit" class="site-btn">Subscribe</button>
                        </form>
                        <div class="footer__widget__social">
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-instagram"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-pinterest"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="footer__copyright">
                        <div class="footer__copyright__text"><p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p></div>
                        <div class="footer__copyright__payment"><img src="img/payment-item.png" alt=""></div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->

    <!-- Js Plugins -->
    <script src="/userAssets/js/jquery-3.3.1.min.js"></script>
    <script src="/userAssets/js/bootstrap.min.js"></script>
    <script src="/userAssets/js/jquery.nice-select.min.js"></script>
    <script src="/userAssets/js/jquery-ui.min.js"></script>
    <script src="/userAssets/js/jquery.slicknav.js"></script>
    <script src="/userAssets/js/mixitup.min.js"></script>
    <script src="/userAssets/js/owl.carousel.min.js"></script>
    <script src="/userAssets/js/main.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        document.getElementById('refferalButton').addEventListener('click', function() {
            $('#refferalModal').modal('show');
        });
    </script>




    <script>

        document.addEventListener('DOMContentLoaded', function () {
            const copyButton = document.getElementById('copy-button');
            const link = document.getElementById('myLink');

            console.log("Copy button:", copyButton);
            console.log("Link:", link);

            if (copyButton && link) {
                copyButton.addEventListener('click', function () {
                    console.log("Button clicked");
                    const textArea = document.createElement('textarea');
                    textArea.value = link.href;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('Link copied to clipboard!');
                });
            } else {
                console.error('Button or link element not found');
            }
        });

        document.getElementById("copyButton").addEventListener("click", function () {
        const referralLink = document.getElementById("referral-link").textContent;

        const tempInput = document.createElement("input");
        tempInput.value = referralLink;
        document.body.appendChild(tempInput);

        tempInput.select();
        document.execCommand("copy");

        document.body.removeChild(tempInput);

        const successMessage = document.getElementById("copySuccessMessage");
        successMessage.classList.remove("d-none");

        setTimeout(function () {
            successMessage.classList.add("d-none");
        }, 3000);
        });


        function openCouponModal() {
          // Show the modal
          $('#couponModal').modal('show');
        }




        function handleCheckboxClick(checkbox, userId) {
            if (checkbox.checked) {
                // Disable other checkboxes
                document.querySelectorAll('[name="useAddress"]').forEach(function (otherCheckbox) {
                    if (otherCheckbox !== checkbox) {
                        otherCheckbox.disabled = true;
                    }
                });
            } else {
                // Enable all checkboxes
                document.querySelectorAll('[name="useAddress"]').forEach(function (otherCheckbox) {
                    otherCheckbox.disabled = false;
                });
            }
        }

        document.getElementById('changePassword').addEventListener('click', async () => {
            const { value: password } = await Swal.fire({
                title: "Enter your password",
                input: "password",
                inputLabel: "Password",
                inputPlaceholder: "Enter your password",
                inputAttributes: {
                    maxlength: "10",
                    autocapitalize: "off",
                    autocorrect: "off"
                }
            });

            fetch('/change-password', {
                method: 'post',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    password
                })
            }).then(response => {
                return response.json()
            }).then(data => {
                if (data) {
                    let value = data.value
                    if (value == 1) {
                        Swal.fire(`incorrect password please try again!`);
                    } else {

                        (async () => {
                            const { value: password } = await Swal.fire({
                                title: "Enter new password",
                                input: "password",
                                inputLabel: "Password",
                                inputPlaceholder: "Enter new password",
                                allowOutsideClick: false,
                                inputAttributes: {
                                    maxlength: "10",
                                    autocapitalize: "off",
                                    autocorrect: "off"
                                },
                                inputValidator: (value) => {
                                    return new Promise((resolve) => {
                                        if (value.length < 6) {
                                            resolve("Password must be at least 6 characters");
                                        } else {
                                            resolve();
                                        }
                                    });
                                }
                            });


                            fetch('/update-password', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    password
                                })
                            }).then(response => {
                                return response.json()
                            }).then(data => {
                                if (data) {
                                    Swal.fire("password updated !", "", "success");
                                }
                            }).catch(error => {
                                console.log(error);
                            })

                        })();

                    }
                }
            }).catch(error => {
                console.log(error);
            })
        })


        async function editprofile() {


            let firstname
            let secondname
            let mobile
            let email
            await Swal.fire({
                title: "Edit  Profile",
                html: `
                <form>
                    <input type="hidden" name="user" value="<%=user%>" id="user">
                    
                    <!-- First Name Field -->
                    <div class="form-group">
                        <label for="firstname">First Name</label>
                        <input type="text" class="form-control" id="firstname" name="firstname" value="<%=user.firstName%>" required>
                    </div>

                    <!-- Second Name Field -->
                    <div class="form-group">
                        <label for="secondname">Second Name</label>
                        <input type="text" class="form-control" id="secondname" name="secondname" value="<%=user.secondName%>" required>
                    </div>


                    <!-- Mobile Field -->
                    <div class="form-group">
                        <label class for="mobile">Mobile</label>
                        <input type="number" class="form-control" id="mobile" name="mobile" value="<%=user.mobile%>" required>
                    </div>

                    <!-- Hidden Address Field -->
                    <input type="hidden" name="address" value="<%=Address%>" required>
                </form>

  `,
                focusConfirm: false,
                showCancelButton: false,
                confirmButtonText: 'Save',
                allowOutsideClick: false,
                preConfirm: () => {

                    firstname = document.getElementById("firstname").value,
                    secondname = document.getElementById("secondname").value,
                    mobile = document.getElementById('mobile').value

                    if (!firstname || !secondname || !mobile) {
                        Swal.showValidationMessage('all fields are required');
                        return false
                    }
                }
            });


            fetch('/edit-profile', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'

                },
                body: JSON.stringify({
                    firstname, secondname, mobile, email
                })

            }).then(response => {
                return response.json()
            }).then(data => {
                if (data) {

                    Swal.fire({
                        position: "center",
                        icon: "success",
                        title: "profile updated",
                        showConfirmButton: false,
                    }); setTimeout(() => {
                        location.reload()
                    }, 1000);
                }
            }).catch(error => {
                console.log(error);
            })

        }
        async function openModal() {

            var country
            var zip
            var state
            var city
            var apartment
            var streetAddress

            const { value: formValues } = await Swal.fire({
                title: "shipping address",
                html: `
                
                <div class="card">
                    <div class="card-body">
                    <form action="/admin/user-account" method= "post">
                        <div class="form-group">
                            <input type="text" name="address" class="form-control" id="Address" placeholder="Enter street address" required>
                        </div>
                        <div class="form-group">
                            <input type="text" name="apartment" class="form-control" id="apartments" placeholder="Enter house name or apartment">
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <input type="text" name="city" class="form-control" id="town" placeholder="Enter city" required>
                            </div>
                            <div class="form-group col-md-6">
                                <input type="text" name="State" class="form-control" id="State" placeholder="Enter state" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <input type="number" minlength="1" maxlength="6" class="form-control" name="zip" id="zipcode" placeholder="Enter zip code" required>
                            </div>
                            <div class="form-group col-md-6">
                                <input type="text" class="form-control" id="countries" name="countries" placeholder="Enter country" required>
                            </div>
                        </div>
                    <form>
                    </div>
                </div>

                `,
                focusConfirm: false,
                allowOutsideClick: false,
                showCancelButton: true,
                preConfirm: () => {
                    streetAddress = document.getElementById("Address").value
                    apartment = document.getElementById("apartments").value
                    city = document.getElementById("town").value
                    state = document.getElementById("State").value;
                    zip = document.getElementById("zipcode").value
                    country = document.getElementById("countries").value


                    if (!streetAddress || !apartment || !city || !state || !zip || !country) {
                        Swal.showValidationMessage('All fields are required');
                        return false;
                    }
                }
            });

            fetch('/user-account', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    streetAddress, city, zip, state, apartment, country
                })
            }).then(response => {
                return response.json()
            }).then(data => {
                if (data) {
                    Swal.fire({
                        position: "center",
                        icon: "success",
                        title: "shipping address has been saved",
                        showConfirmButton: false,
                    }); setTimeout(() => {
                        location.reload()
                    }, 1000);
                }
            }).catch(error => {
                console.log(error);
            })

        }


    </script>
</body>

</html>